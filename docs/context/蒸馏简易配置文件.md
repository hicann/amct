# 蒸馏简易配置文件<a name="ZH-CN_TOPIC_0000002517188630"></a>

distill\_config\_pytorch.proto文件参数说明如[表1](#zh-cn_topic_0240188735_table1225503375617)所示，该文件所在目录为：_AMCT安装目录_/amct\_pytorch/proto/distill\_config\_pytorch.proto。

**表 1**  distill\_config\_pytorch.proto参数说明

<a name="zh-cn_topic_0240188735_table1225503375617"></a>
<table><thead align="left"><tr id="zh-cn_topic_0240188735_row11255153315614"><th class="cellrowborder" valign="top" width="11.148885111488852%" id="mcps1.2.6.1.1"><p id="zh-cn_topic_0240188735_p6255193315616"><a name="zh-cn_topic_0240188735_p6255193315616"></a><a name="zh-cn_topic_0240188735_p6255193315616"></a>消息</p>
</th>
<th class="cellrowborder" valign="top" width="6.52934706529347%" id="mcps1.2.6.1.2"><p id="p194851125105014"><a name="p194851125105014"></a><a name="p194851125105014"></a>是否必填</p>
</th>
<th class="cellrowborder" valign="top" width="15.968403159684033%" id="mcps1.2.6.1.3"><p id="p466892519514"><a name="p466892519514"></a><a name="p466892519514"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="17.20827917208279%" id="mcps1.2.6.1.4"><p id="zh-cn_topic_0240188735_p499481531910"><a name="zh-cn_topic_0240188735_p499481531910"></a><a name="zh-cn_topic_0240188735_p499481531910"></a>字段</p>
</th>
<th class="cellrowborder" valign="top" width="49.14508549145086%" id="mcps1.2.6.1.5"><p id="zh-cn_topic_0240188735_p122551335563"><a name="zh-cn_topic_0240188735_p122551335563"></a><a name="zh-cn_topic_0240188735_p122551335563"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0240188735_row122551133185610"><td class="cellrowborder" rowspan="11" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0240188735_p1925513338569"><a name="zh-cn_topic_0240188735_p1925513338569"></a><a name="zh-cn_topic_0240188735_p1925513338569"></a>AMCTDistillConfig</p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p1485162505012"><a name="p1485162505012"></a><a name="p1485162505012"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p1617031410516"><a name="p1617031410516"></a><a name="p1617031410516"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0240188735_p2994161514196"><a name="zh-cn_topic_0240188735_p2994161514196"></a><a name="zh-cn_topic_0240188735_p2994161514196"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0240188735_p82551633105614"><a name="zh-cn_topic_0240188735_p82551633105614"></a><a name="zh-cn_topic_0240188735_p82551633105614"></a><span id="ph244511481409"><a name="ph244511481409"></a><a name="ph244511481409"></a>AMCT</span>蒸馏的简易配置。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row9255123311566"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p11249539520"><a name="p11249539520"></a><a name="p11249539520"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p19715115505"><a name="p19715115505"></a><a name="p19715115505"></a>uint32</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="zh-cn_topic_0240188735_p11994171511911"><a name="zh-cn_topic_0240188735_p11994171511911"></a><a name="zh-cn_topic_0240188735_p11994171511911"></a>batch_num</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p960514816581"><a name="p960514816581"></a><a name="p960514816581"></a>蒸馏batch数量，用于ifmr积累数据计算量化因子。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row11255533205611"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p142538635219"><a name="p142538635219"></a><a name="p142538635219"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p13170131414515"><a name="p13170131414515"></a><a name="p13170131414515"></a>uint32</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p3485437193614"><a name="p3485437193614"></a><a name="p3485437193614"></a>group_size</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p125052825714"><a name="p125052825714"></a><a name="p125052825714"></a>蒸馏block中最小蒸馏单元个数。</p>
</td>
</tr>
<tr id="row410750183617"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p998581133711"><a name="p998581133711"></a><a name="p998581133711"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p29851314379"><a name="p29851314379"></a><a name="p29851314379"></a>bool</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p2111250103612"><a name="p2111250103612"></a><a name="p2111250103612"></a>data_dump</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1211950143613"><a name="p1211950143613"></a><a name="p1211950143613"></a>teacher网络block输入输出dump开关。</p>
</td>
</tr>
<tr id="row116751031143112"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p62711337163112"><a name="p62711337163112"></a><a name="p62711337163112"></a>repeated</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p1814413328378"><a name="p1814413328378"></a><a name="p1814413328378"></a>DistillGroup</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p17053763719"><a name="p17053763719"></a><a name="p17053763719"></a>distill_group</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p6272113718317"><a name="p6272113718317"></a><a name="p6272113718317"></a>用户自定义蒸馏结构。</p>
</td>
</tr>
<tr id="row344417284313"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p975112303711"><a name="p975112303711"></a><a name="p975112303711"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p137509323716"><a name="p137509323716"></a><a name="p137509323716"></a>DistillDataQuantConfig</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1674919373712"><a name="p1674919373712"></a><a name="p1674919373712"></a>distill_data_quant_config</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p193621260447"><a name="p193621260447"></a><a name="p193621260447"></a>蒸馏数据量化配置参数。</p>
</td>
</tr>
<tr id="row888883816479"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p167478303715"><a name="p167478303715"></a><a name="p167478303715"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p3746203163711"><a name="p3746203163711"></a><a name="p3746203163711"></a>DistillWeightQuantConfig</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p16745133103717"><a name="p16745133103717"></a><a name="p16745133103717"></a>distill_weight_quant_config</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p20680132018441"><a name="p20680132018441"></a><a name="p20680132018441"></a>蒸馏权重量化配置参数。</p>
</td>
</tr>
<tr id="row1422161319377"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p14743138376"><a name="p14743138376"></a><a name="p14743138376"></a>repeated</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p1474243153714"><a name="p1474243153714"></a><a name="p1474243153714"></a>DistillOverrideLayer</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p0741934376"><a name="p0741934376"></a><a name="p0741934376"></a>distill_override_layers</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p57401832375"><a name="p57401832375"></a><a name="p57401832375"></a>重写某一层的量化配置。</p>
</td>
</tr>
<tr id="row198411100379"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p873818311376"><a name="p873818311376"></a><a name="p873818311376"></a>repeated</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p13737136377"><a name="p13737136377"></a><a name="p13737136377"></a>DistillOverrideLayerType</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1173615333717"><a name="p1173615333717"></a><a name="p1173615333717"></a>distill_override_layer_types</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p573615311379"><a name="p573615311379"></a><a name="p573615311379"></a>重写某一类型层的量化配置。</p>
</td>
</tr>
<tr id="row73596813715"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p673311310376"><a name="p673311310376"></a><a name="p673311310376"></a>repeated</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p67321036377"><a name="p67321036377"></a><a name="p67321036377"></a>string</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p157315363711"><a name="p157315363711"></a><a name="p157315363711"></a>quant_skip_layers</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p147309303710"><a name="p147309303710"></a><a name="p147309303710"></a>不需要量化的层，仍然做蒸馏。</p>
</td>
</tr>
<tr id="row145071332133914"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p185218643910"><a name="p185218643910"></a><a name="p185218643910"></a>repeated</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p145216693919"><a name="p145216693919"></a><a name="p145216693919"></a>string</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p16663151918389"><a name="p16663151918389"></a><a name="p16663151918389"></a>quant_skip_layer_types</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1662119163817"><a name="p1662119163817"></a><a name="p1662119163817"></a>不需要量化的算子类型，仍然需要做蒸馏。</p>
</td>
</tr>
<tr id="row482792219565"><td class="cellrowborder" rowspan="3" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p446832203818"><a name="p446832203818"></a><a name="p446832203818"></a>DistillGroup</p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p1446715227380"><a name="p1446715227380"></a><a name="p1446715227380"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p64671922153815"><a name="p64671922153815"></a><a name="p64671922153815"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p74651222113812"><a name="p74651222113812"></a><a name="p74651222113812"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p1446510225386"><a name="p1446510225386"></a><a name="p1446510225386"></a>用户自定义蒸馏结构。蒸馏结构中仅支持torch.nn.Module类型的算子。</p>
</td>
</tr>
<tr id="row2858192774816"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p028817278399"><a name="p028817278399"></a><a name="p028817278399"></a>required</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p02887276396"><a name="p02887276396"></a><a name="p02887276396"></a>string</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p10462132273819"><a name="p10462132273819"></a><a name="p10462132273819"></a>start_layer_name</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1946114229385"><a name="p1946114229385"></a><a name="p1946114229385"></a>用户自定义蒸馏结构起始层。</p>
</td>
</tr>
<tr id="row206061625184819"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1419314392391"><a name="p1419314392391"></a><a name="p1419314392391"></a>required</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p5193133910393"><a name="p5193133910393"></a><a name="p5193133910393"></a>string</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p445992243816"><a name="p445992243816"></a><a name="p445992243816"></a>end_layer_name</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p11712111313815"><a name="p11712111313815"></a><a name="p11712111313815"></a>用户自定义蒸馏结构结束层。</p>
</td>
</tr>
<tr id="row3932455380"><td class="cellrowborder" rowspan="2" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p645715224381"><a name="p645715224381"></a><a name="p645715224381"></a>DistillDataQuantConfig</p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p10457162213819"><a name="p10457162213819"></a><a name="p10457162213819"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p1445617220388"><a name="p1445617220388"></a><a name="p1445617220388"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p1455152253812"><a name="p1455152253812"></a><a name="p1455152253812"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p1358112517220"><a name="p1358112517220"></a><a name="p1358112517220"></a>蒸馏数据量化配置。</p>
</td>
</tr>
<tr id="row17134635121413"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p14454022183818"><a name="p14454022183818"></a><a name="p14454022183818"></a>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p4453132217383"><a name="p4453132217383"></a><a name="p4453132217383"></a>ActULQquantize</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p6452172213818"><a name="p6452172213818"></a><a name="p6452172213818"></a>ulq_quantize</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p245102263819"><a name="p245102263819"></a><a name="p245102263819"></a>数据量化的算法，目前仅支持ulq。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row11783104092012"><td class="cellrowborder" rowspan="4" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p104475223383"><a name="p104475223383"></a><a name="p104475223383"></a>ActULQquantize</p>
<p id="p10494717174011"><a name="p10494717174011"></a><a name="p10494717174011"></a></p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p1844672217380"><a name="p1844672217380"></a><a name="p1844672217380"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p54441222123815"><a name="p54441222123815"></a><a name="p54441222123815"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p5443722123810"><a name="p5443722123810"></a><a name="p5443722123810"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p6442152212388"><a name="p6442152212388"></a><a name="p6442152212388"></a>ULQ数据量化算法配置。算法介绍请参见xx</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row10956202614283"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p2442102217388"><a name="p2442102217388"></a><a name="p2442102217388"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p154411822143814"><a name="p154411822143814"></a><a name="p154411822143814"></a>ClipMaxMin</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1044017223383"><a name="p1044017223383"></a><a name="p1044017223383"></a>clip_max_min</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p463372224914"><a name="p463372224914"></a><a name="p463372224914"></a>初始化的上下限值，如果不配置，默认用ifmr进行初始化。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row1438216329281"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p243815222386"><a name="p243815222386"></a><a name="p243815222386"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p5437122283813"><a name="p5437122283813"></a><a name="p5437122283813"></a>bool</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p3436142212381"><a name="p3436142212381"></a><a name="p3436142212381"></a>fixed_min</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p138678625013"><a name="p138678625013"></a><a name="p138678625013"></a>是否下限不学习且固定为0。默认ReLu后为true，其他为false。</p>
</td>
</tr>
<tr id="row11494111794013"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p19494717134016"><a name="p19494717134016"></a><a name="p19494717134016"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p18494517174015"><a name="p18494517174015"></a><a name="p18494517174015"></a>DataType</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p10494131774013"><a name="p10494131774013"></a><a name="p10494131774013"></a>dst_type</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1494131714404"><a name="p1494131714404"></a><a name="p1494131714404"></a>用以选择INT8或INT4量化位宽，默认为INT8。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row166322283234"><td class="cellrowborder" rowspan="3" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p288502412385"><a name="p288502412385"></a><a name="p288502412385"></a>ClipMaxMin</p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p18841824113817"><a name="p18841824113817"></a><a name="p18841824113817"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p488492414388"><a name="p488492414388"></a><a name="p488492414388"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p58831224133812"><a name="p58831224133812"></a><a name="p58831224133812"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p8983124213468"><a name="p8983124213468"></a><a name="p8983124213468"></a>初始上下限。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row116226814307"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p68812241388"><a name="p68812241388"></a><a name="p68812241388"></a>required</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p14880624183818"><a name="p14880624183818"></a><a name="p14880624183818"></a>float</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1187913249383"><a name="p1187913249383"></a><a name="p1187913249383"></a>clip_max</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p985785605011"><a name="p985785605011"></a><a name="p985785605011"></a>初始上限值。</p>
</td>
</tr>
<tr id="row133031249144919"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p4857102411413"><a name="p4857102411413"></a><a name="p4857102411413"></a>required</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p1185742418417"><a name="p1185742418417"></a><a name="p1185742418417"></a>float</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p178766248383"><a name="p178766248383"></a><a name="p178766248383"></a>clip_min</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1242245111501"><a name="p1242245111501"></a><a name="p1242245111501"></a>初始下限值。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row13931454162310"><td class="cellrowborder" rowspan="3" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p486112243386"><a name="p486112243386"></a><a name="p486112243386"></a>DistillWeightQuantConfig</p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p8860142443814"><a name="p8860142443814"></a><a name="p8860142443814"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p7860324103815"><a name="p7860324103815"></a><a name="p7860324103815"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p285911247382"><a name="p285911247382"></a><a name="p285911247382"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p10857124113817"><a name="p10857124113817"></a><a name="p10857124113817"></a>蒸馏权重量化配置。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row73046209318"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p7856152415388"><a name="p7856152415388"></a><a name="p7856152415388"></a>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p198545247382"><a name="p198545247382"></a><a name="p198545247382"></a>ARQDistill</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1853824193819"><a name="p1853824193819"></a><a name="p1853824193819"></a>arq_distill</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p54929165210"><a name="p54929165210"></a><a name="p54929165210"></a>ARQ权重量化算法。</p>
</td>
</tr>
<tr id="row161661153104112"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p11166155313419"><a name="p11166155313419"></a><a name="p11166155313419"></a>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p1316635364115"><a name="p1316635364115"></a><a name="p1316635364115"></a>WtsULQDistill</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1516695334116"><a name="p1516695334116"></a><a name="p1516695334116"></a>ulq_distill</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p952365884315"><a name="p952365884315"></a><a name="p952365884315"></a>ULQ权重量化算法。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row188464215242"><td class="cellrowborder" rowspan="3" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p151282893810"><a name="p151282893810"></a><a name="p151282893810"></a>ARQDistill</p>
<p id="p1453045619425"><a name="p1453045619425"></a><a name="p1453045619425"></a></p>
<p id="p453113564422"><a name="p453113564422"></a><a name="p453113564422"></a></p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p145121228193819"><a name="p145121228193819"></a><a name="p145121228193819"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p155111028113811"><a name="p155111028113811"></a><a name="p155111028113811"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p95101128153814"><a name="p95101128153814"></a><a name="p95101128153814"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p185096281385"><a name="p185096281385"></a><a name="p185096281385"></a>ARQ权重量化算法配置。算法介绍请参见<a href="../算法介绍.md">ARQ权重量化算法</a>。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row8300152716336"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p12509142812387"><a name="p12509142812387"></a><a name="p12509142812387"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p135088280380"><a name="p135088280380"></a><a name="p135088280380"></a>DataType</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p14507202893815"><a name="p14507202893815"></a><a name="p14507202893815"></a>dst_type</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p47171749181715"><a name="p47171749181715"></a><a name="p47171749181715"></a>用以选择INT8或INT4量化位宽，默认为INT8。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row1918914326335"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1050613288386"><a name="p1050613288386"></a><a name="p1050613288386"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p05051287384"><a name="p05051287384"></a><a name="p05051287384"></a>bool</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p17504172863815"><a name="p17504172863815"></a><a name="p17504172863815"></a>channel_wise</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p73031121184714"><a name="p73031121184714"></a><a name="p73031121184714"></a>是否做channel wise的arq。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row20464636113312"><td class="cellrowborder" rowspan="3" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p14531856104214"><a name="p14531856104214"></a><a name="p14531856104214"></a>WtsULQDistill</p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p12503202819384"><a name="p12503202819384"></a><a name="p12503202819384"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p18502428203812"><a name="p18502428203812"></a><a name="p18502428203812"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p15001528133810"><a name="p15001528133810"></a><a name="p15001528133810"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p150072810380"><a name="p150072810380"></a><a name="p150072810380"></a>ULQ权重量化算法配置。算法介绍请参见<a href="../算法介绍.md">ULQ数据量化算法</a>。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row1710933263612"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p44991328163811"><a name="p44991328163811"></a><a name="p44991328163811"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p549842816383"><a name="p549842816383"></a><a name="p549842816383"></a>DataType</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p17497172803820"><a name="p17497172803820"></a><a name="p17497172803820"></a>dst_type</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p187026176455"><a name="p187026176455"></a><a name="p187026176455"></a>用以选择INT8或INT4量化位宽，默认为INT8。</p>
</td>
</tr>
<tr id="zh-cn_topic_0240188735_row26036420362"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p17496728183817"><a name="p17496728183817"></a><a name="p17496728183817"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p1649562873813"><a name="p1649562873813"></a><a name="p1649562873813"></a>bool</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p154959285387"><a name="p154959285387"></a><a name="p154959285387"></a>channel_wise</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1977013514458"><a name="p1977013514458"></a><a name="p1977013514458"></a>是否做channel wise的ulq。</p>
</td>
</tr>
<tr id="row156362201313"><td class="cellrowborder" rowspan="4" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p353165615423"><a name="p353165615423"></a><a name="p353165615423"></a>DistillOverrideLayer</p>
<p id="p6531105684220"><a name="p6531105684220"></a><a name="p6531105684220"></a></p>
<p id="p124851328133814"><a name="p124851328133814"></a><a name="p124851328133814"></a></p>
<p id="p1422443714444"><a name="p1422443714444"></a><a name="p1422443714444"></a></p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p449416289383"><a name="p449416289383"></a><a name="p449416289383"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p1349352843817"><a name="p1349352843817"></a><a name="p1349352843817"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p164924283388"><a name="p164924283388"></a><a name="p164924283388"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p070616416472"><a name="p070616416472"></a><a name="p070616416472"></a>重写的层配置。</p>
</td>
</tr>
<tr id="row65481912144710"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p15487328133810"><a name="p15487328133810"></a><a name="p15487328133810"></a>required</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p12487132818388"><a name="p12487132818388"></a><a name="p12487132818388"></a>string</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p44861428123812"><a name="p44861428123812"></a><a name="p44861428123812"></a>layer_name</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p467965710535"><a name="p467965710535"></a><a name="p467965710535"></a>层名。</p>
</td>
</tr>
<tr id="row11961131163419"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p13484102817380"><a name="p13484102817380"></a><a name="p13484102817380"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p248392873818"><a name="p248392873818"></a><a name="p248392873818"></a>DistillDataQuantConfig</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p114821428103817"><a name="p114821428103817"></a><a name="p114821428103817"></a>distill_data_quant_config</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p147371155412"><a name="p147371155412"></a><a name="p147371155412"></a>重写的数据层量化参数。</p>
</td>
</tr>
<tr id="row177009291348"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p10480828193818"><a name="p10480828193818"></a><a name="p10480828193818"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p247912843815"><a name="p247912843815"></a><a name="p247912843815"></a>DistillWeightQuantConfig</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p84791028203818"><a name="p84791028203818"></a><a name="p84791028203818"></a>distill_weight_quant_config</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1934162195416"><a name="p1934162195416"></a><a name="p1934162195416"></a>重写的权重层量化参数。</p>
</td>
</tr>
<tr id="row10570175313455"><td class="cellrowborder" rowspan="4" valign="top" width="11.148885111488852%" headers="mcps1.2.6.1.1 "><p id="p1022511377443"><a name="p1022511377443"></a><a name="p1022511377443"></a>DistillOverrideLayerType</p>
</td>
<td class="cellrowborder" valign="top" width="6.52934706529347%" headers="mcps1.2.6.1.2 "><p id="p1657075304510"><a name="p1657075304510"></a><a name="p1657075304510"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="15.968403159684033%" headers="mcps1.2.6.1.3 "><p id="p15570105316456"><a name="p15570105316456"></a><a name="p15570105316456"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="17.20827917208279%" headers="mcps1.2.6.1.4 "><p id="p7570953114510"><a name="p7570953114510"></a><a name="p7570953114510"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="49.14508549145086%" headers="mcps1.2.6.1.5 "><p id="p1114123811478"><a name="p1114123811478"></a><a name="p1114123811478"></a>重写的层类型配置。</p>
</td>
</tr>
<tr id="row1187284116114"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1463205984412"><a name="p1463205984412"></a><a name="p1463205984412"></a>required</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p546305917446"><a name="p546305917446"></a><a name="p546305917446"></a>string</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p133371716114517"><a name="p133371716114517"></a><a name="p133371716114517"></a>layer_type</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p137260825513"><a name="p137260825513"></a><a name="p137260825513"></a>层类型。</p>
</td>
</tr>
<tr id="row131961176472"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p34634591448"><a name="p34634591448"></a><a name="p34634591448"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p546312592448"><a name="p546312592448"></a><a name="p546312592448"></a>DistillDataQuantConfig</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p44751328103818"><a name="p44751328103818"></a><a name="p44751328103818"></a>distill_data_quant_config</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1845112145511"><a name="p1845112145511"></a><a name="p1845112145511"></a>重写的数据层量化参数。</p>
</td>
</tr>
<tr id="row1415961314508"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p3464559194418"><a name="p3464559194418"></a><a name="p3464559194418"></a>optional</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p13464175984411"><a name="p13464175984411"></a><a name="p13464175984411"></a>DistillWeightQuantConfig</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p746822818386"><a name="p746822818386"></a><a name="p746822818386"></a>distill_weight_quant_config</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p87004178556"><a name="p87004178556"></a><a name="p87004178556"></a>重写的权重层量化参数。</p>
</td>
</tr>
</tbody>
</table>


基于该文件构造的**蒸馏简易配置文件**_quant_.cfg样例如下所示：

```
batch_num: 1
group_size: 1
data_dump: true

distill_group: {
    start_layer_name: "layer1"
    end_layer_name: "layer2"
}

distill_data_quant_config: {
    ulq_quantize: {
        clip_max_min: {
            clip_max: 6.0
            clip_min: -6.0
        }
        fixed_min: true
        dst_type: INT8
    }
}

distill_weight_quant_config: {
    arq_distill: {
       channel_wise: true
       dst_type: INT8
    }
  }

quant_skip_layers: "layer3"
quant_skip_layer_types: "type1"

distill_override_layers : {
    layer_name: "layer4"
    distill_data_quant_config: {
        ulq_quantize: {
            clip_max_min: {
                clip_max: 3.0
                clip_min: -3.0
            }
            fixed_min: true
            dst_type: INT8
        }
    }
    distill_weight_quant_config: {
        arq_distill: {
           channel_wise: false
           dst_type: INT8     
        }
    }
}

distill_override_layer_types : {
    layer_type: "type2"
    distill_data_quant_config: {
        ulq_quantize: {
            clip_max_min: {
                clip_max: 3.0
                clip_min: -3.0
            }
            fixed_min: true
            dst_type: INT4
        }
    }
    distill_weight_quant_config: {
        ulq_distill: {
           channel_wise: false
           dst_type: INT8     
        }
    }
}
```

